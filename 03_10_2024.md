# Day 3

## Things I learned

1. Web pages and other contents are delievered by __views__. Each view is represented by a function (or method in the case of class-based views). Django will choose a view by examining the requested URL (the part of the URL after the domain name)
2. All POST forms that are targeted at internal URLs should use the `{% csrf_token %}` template tag. Since Django comes with a system for protecting against Cross Site Requests Forgeries, we need not worry about that.
3. Always return an `HttpResponseRedirect` after successfully dealing with POST data. (General good web development practice)
4. General idea of basic web development: (API) getting data from the database according to a parameter passed in the URL, (rendering data + assets) loading a template and returning the rendered template. Since this is common, Django provides a shorcut called "generic views" system.
   - Generic views (class-based) abstract this common pattern to the point where you don't need to write code to write an app, e.g. `ListView` nad `DetailView` generic views abstract the concepts of "display a list of objects" and "display a detail page for a particular type of object" respectively.
   - Steps of implementing generic views
       - Convert the URLconf 
       - Delete some of the old, unneeded views
       - Introduce new views based on Django's generic views
   - Summary
       - Each generic view needs to know what model it acts upon. This is provided using either the `model` attribute or by defining `get_queryset()` method
       - `template_name` attribute is used to tell Django to use a specific template name instead of the autogenerated default template name.
       - 'context_object_name' attribute overrides automatically generated context variable by Django
5. `db.sqlite3` file updates automatically when you interact with the database such as
   - run migration (`python manage.py migrate`)
   - add, modify, or delete records through views (e.g., creating new questions or votes)
   - test views or models

## Bugs

Function at issue

```python
def vote(request, question_id):
    question = get_object_or_404(Question, pk=question_id)
    try:
        selected_choice = question.choice_set.get(pk=request.POST["choice"])
    except (KeyError, Choice.DoesNotExist):
        # Redisplay the question voting form.
        return render(
            request,
            "polls/details.html",
            {
                "question": question,
                "error_message": "You didn't select a choice."
            }
        )
    else:
        selected_choice.votes = F("votes") + 1
        selected_choice.save()
        # Always return an HttpResponseRedirect after successfully dealing with POST data.
        # This prevents data from being posted twice if a user hits the Back button.
        return HttpResponseRedirect(reverse("polls:results", args=(question_id)))
```

Issue Description:
1. TypeError: Value after * must be an iterable, not int

Solution:
modifed 
```python
return HttpResponseRedirect(reverse("polls:results", args=(question_id)))
```

to 

```python
return HttpResponseRedirect(reverse("polls:results", args=(question_id,)))
```

Specifically
Modify `args=(question_id)` to `args=(question_id,)`
Added a comma to make it an iterable
